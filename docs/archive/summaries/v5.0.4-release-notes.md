# Release Notes: v5.0.4

**Release Date:** 2025-11-24
**Status:** Production Ready

---

## Summary

This patch release introduces comprehensive data visualization enhancements and portfolio-level security analytics. The focus is on providing power users with visual insights into security score composition and aggregated portfolio analysis across multiple extensions, while maintaining the high test coverage and quality standards established in v5.0.3.

---

## Key Features

### Feature 1: Portfolio Analysis Dashboard

Introduces portfolio-level aggregation showing security trends across your entire extension collection.

**Key Benefits:**
- **Aggregated Insights**: See total positive/negative score contributions across all scanned extensions
- **Professional Visualization**: Interactive Chart.js-powered bar charts with gradient color schemes
- **Clean Presentation**: Numeric-only labels for optimal readability
- **Strategic Overview**: Understand which security modules contribute most to portfolio risk

**Usage:**
```bash
# Scan multiple extensions and generate HTML report with portfolio analysis
vscan scan --output portfolio.html

# The HTML report now includes a "Portfolio Analysis" section showing:
# - Aggregated score contributions per module
# - Visual bar charts with color-coded risk levels
# - Total impact of each security module across all extensions
```

### Feature 2: Enhanced Module Score Contributions

Detailed visualization of how each of the 11 security analysis modules affects extension security scores.

**Key Benefits:**
- **Transparency**: See exactly how security scores are calculated
- **Per-Extension Analysis**: Detailed breakdown for each scanned extension
- **Color-Coded Risk**: Green (positive), Red (negative) visual indicators
- **Self-Contained**: No external CDN dependencies, fully offline-capable

**Usage:**
```bash
# Generate HTML report with score contribution charts
vscan scan microsoft.vscode-python --output report.html

# View detailed module breakdown in CLI
vscan scan microsoft.vscode-python --detailed
```

### Feature 3: Enhanced Metadata Display

Richer CLI output for `--detailed` mode with preserved metadata structure.

**Usage:**
```bash
vscan scan microsoft.vscode-python --detailed
# Now includes:
# - Install counts
# - Ratings and rating counts
# - Repository URLs
# - License information
# - Categories and keywords
```

---

## Improvements

- **Chart.js Integration**: Added Chart.js library (chart.min.js) for client-side visualizations in HTML reports
- **CSS Enhancements**: Improved styling for portfolio analysis section with responsive design
- **Module Breakdown Enhancements**: Added support for "critical" risk level in module breakdown charts
- **Score Calculation Alignment**: Fixed inconsistencies between table and chart score displays
- **Component Architecture**: Modular score_contributions.py component (326 lines) for maintainability
- **Test Coverage**: Comprehensive test suites for new visualization components (445 lines of tests)

---

## Bug Fixes

- **Fixed:** Empty SecurityNotesComponent rendering in HTML reports - Removed conditional rendering that caused empty sections
- **Fixed:** Critical risk level not displayed correctly in module breakdown chart - Added support for 4-level risk classification
- **Fixed:** Chart.js loading race condition - Ensured Chart.js loads before chart initialization
- **Fixed:** Score calculation inconsistency between table and chart - Aligned base score exclusion logic
- **Fixed:** Metadata structure not preserved in CLI detailed display - Maintained original API response structure

---

## Breaking Changes

None - This release is fully backward compatible with v5.0.3

---

## Installation

### New Installation

```bash
pip install vscode_extension_scanner-5.0.4-py3-none-any.whl
```

### Upgrade from Previous Version

```bash
pip install --upgrade vscode_extension_scanner-5.0.4-py3-none-any.whl
```

**Verify installation:**
```bash
vscan --version
# Should show: 5.0.4
```

---

## Upgrade Notes

### From v5.0.x

- Fully compatible, drop-in replacement
- No configuration changes required
- All cached data remains valid
- HTML report format enhanced but backward compatible

### Database/Cache

- No cache migration required
- Schema version remains 5.0 (unchanged from v5.0.0)
- All cached data remains compatible

---

## Known Issues

None - All known issues from v5.0.3 have been resolved.

---

## Deprecation Notices

None

---

## Documentation

- **Full Changelog:** [CHANGELOG.md](../../CHANGELOG.md)
- **Release Process:** [RELEASE_PROCESS.md](../contributing/RELEASE_PROCESS.md)
- **User Guide:** [README.md](../../README.md)
- **Developer Guide:** [CLAUDE.md](../../CLAUDE.md)
- **HTML Reports Guide:** [HTML_REPORTS.md](../guides/HTML_REPORTS.md)

---

## Testing

This release has been tested on:

- ✅ macOS 15.1.0 (Darwin 25.1.0) (primary platform)

**Test coverage:**
- 70 test files
- 1,314 total tests
- 89.39% code coverage (exceeds 80% threshold)
- 1 test skipped (real API test)
- 0 security vulnerabilities
- 0 architecture violations

**Test breakdown:**
- Architecture tests: 5 tests
- Integration tests: 69 tests
- Security tests: 280 tests
- Unit tests: 930 tests
- Mock validation: 11 tests
- Parallel execution: 16 tests

**New test suites:**
- `test_html_score_contributions.py`: 445 lines of comprehensive visualization testing
- Enhanced `test_html_module_breakdown.py`: Additional critical risk level tests
- Enhanced `test_display.py`: Metadata display validation

---

## Contributors

This release was developed by Jörg von Livonius with AI assistance from Claude Code.

---

## Feedback

Found a bug? Have a feature request?

- **Issues:** https://github.com/jvlivonius/vsc-extension-scanner/issues
- **Documentation:** https://github.com/jvlivonius/vsc-extension-scanner/tree/main/docs

---

## What's Next

Planned for v5.1.0:

- Interactive filtering and drill-down in HTML reports
- Time-series analysis for tracking security scores over time
- Export chart data to CSV/JSON formats
- Customizable chart themes and color schemes
- Additional portfolio-level statistics and trends

See [v5.x-enhancement-opportunities.md](../project/v5.x-enhancement-opportunities.md) for details.

---

**Happy scanning! Stay secure.**
